<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Demo: ClayLabelsInputField</title>

	<link rel="stylesheet" href="../../../node_modules/clay-css/lib/css/atlas.css">

	<style>
		body {
			background-color: #FFF;
		}

		.row {
			margin-bottom: 20px;
		}
	</style>

	<script src="../build/globals/clay-labels-input-field.js"></script>
</head>
<body class="container" role="main">
	<h1 class="page-title" id="pageTitle">
		ClayLabelsInputField
	</h1>

	<div class="row row-spacing">
		<div class="col">
			<h2>Default State</h2>
			<div id="default-block"></div>
		</div>
	</div>

	<div class="row row-spacing">
		<div class="col">
			<h2>With autocomplete</h2>
			<div id="autocomplete-block"></div>
		</div>
	</div>

	<div class="row row-spacing">
		<div class="col">
			<h2>With autocomplete and interaction</h2>
			<div id="interaction-block"></div>
		</div>
	</div>

	<script type="text/javascript">

		const spritemap = '../../../node_modules/clay-css/lib/images/icons/icons.svg';
		const selectedLabels = [
			{
				label: 'bread'
			},
			{
				label: 'ammonia cookie'
			}
		];
		const dataProvider = [
			'Bread',
			'Ammonia cookie',
			'Cuisine of Antebellum America',
			'Apple butter',
			'Apple sauce',
			'Baked potato',
			'Barbecue',
			'Bear claw',
			'Beef Manhattan',
			'Blue cheese dressing',
			'Blue-plate special',
			'Bookbinder soup',
			'Breakfast burrito',
			'Brunswick stew',
			'Buffalo burger',
			'Buffalo wing',
			'Bull roast',
			'Burnt ends',
			'Butter cookie',
		];

		// Default State
		new metal.ClayLabelsInputField({
			helpText: 'You can use a comma to enter tags',
			label: 'Tags',
			selectedLabels,
			spritemap,
		}, '#default-block');

		// With autocomplete
		new metal.ClayLabelsInputField({
			events: {
				queryChange: (event) => {
					const query = event.data.value;

					if (query) {
						const filterAutocomplete = event.target.filterAutocomplete;
						event.target.filteredItems = filterAutocomplete(dataProvider, query);
					} else {
						event.target.filteredItems = [];
					}
				}
			},
			helpText: 'You can use a comma to enter tags',
			label: 'Tags',
			selectedLabels,
			spritemap,
		}, '#autocomplete-block');

		// With autocomplete and interaction
		new metal.ClayLabelsInputField({
			label: 'Tags',
			selectedLabels,
			spritemap,
			events: {
				labelAdded: (event) => {
					selectedLabels.push({label: event.data.value});
					event.target.selectedLabels = selectedLabels;
					event.target.clearInput();
					event.target.filteredItems = [];
				},
				labelRemoved: (event) => {
					selectedLabels.splice(Number(event.data.index), 1);
					event.target.selectedLabels = selectedLabels;
				},
				queryChange: (event) => {
					const query = event.data.value;

					if (query) {
						const filterAutocomplete = event.target.filterAutocomplete;
						event.target.filteredItems = filterAutocomplete(dataProvider, query);
					} else {
						event.target.filteredItems = [];
					}
				}
			},
			helpText: 'You can use a comma to enter tags',
		}, '#interaction-block');

	</script>
</body>
</html>
